datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id           Int       @id
    name         String    @unique
    auth_session Session[]
    key          Key[]
    Post         Post[]
}

model Session {
    id             Int    @id
    active_expires BigInt
    idle_expires   BigInt
    user           User   @relation(references: [id], fields: [userId], onDelete: Cascade)
    userId         Int

    @@index([userId])
}

model Key {
    id              Int     @id
    hashed_password String?
    user            User    @relation(references: [id], fields: [userId], onDelete: Cascade)
    userId          Int

    @@index([userId])
}

model Post {
    id        String   @id @default(uuid()) @db.Uuid
    createdAt DateTime @default(now())
    title     String   @db.Text
    body      String   @db.Text
    author    User?    @relation(fields: [authorId], references: [id])
    authorId  Int?
}
